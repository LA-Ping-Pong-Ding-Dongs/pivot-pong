<div class="dashboard-container">
  <div id="player_tiles_container"></div>

  <div id="match_form_container" class="overlay">
    <%= form_for @match, url: matches_path, as: 'match' do |f| %>
      <h1 class="app-name"><%= I18n.t('application.name_html').html_safe %></h1>

      <%= f.text_field :winner, placeholder: I18n.t('match.form.winner_label').upcase, tabindex: 1 %>

      <span class="defeats-text"><%= I18n.t('match.form.defeats_verb') %></span>

      <%= f.text_field :loser, placeholder: I18n.t('match.form.loser_label').upcase, tabindex: 2 %>

      <%= f.submit t('match.form.commit'), id: 'save_match', tabindex: 3 %>
    <% end -%>
  </div>


  <div class="dashboard-pane overlay">
    <ul class="pane-toggle">
      <li class="leaderboard-link active">Leaderboard</li>
      <li class="recent-matches-link">Recent Matches</li>
    </ul>

    <div id="leaderboard_container" class="active">
      <h3><%= I18n.t('player.tournament_rankings.title') %></h3>
      <ol>
        <% @tournament_rankings.each do |player_ranking| %>
          <li>
            <%= "#{player_ranking.name} #{player_ranking.wins}-#{player_ranking.losses}" %>
          </li>
        <% end %>
      </ol>
    </div>

    <div id="recent_matches_container">
      <h3><%= I18n.t('player.recent_matches.title') %></h3>
    </div>

  </div>

  <div id="player_info" class="overlay"></div>
</div>

<script type="text/javascript">
  $(function() {
    pong.players = <%= PlayerTilesJsonPresenter.new(@players).to_json.html_safe %>;
    new pong.AppRouter();
    Backbone.history.start();

//        we took this out because clicking a tile on the dashboard changes the current url to url/players/key
//        and subsequent dashboard reloads would navigate away to the player page instead of staying on the dashboard
//        $(document).click('a', pong.navigator);

    pong.initializeDashboard();
  });
</script>
